@using DVSRegister.BusinessLogic.Models.CAB
@using DVSRegister.Extensions
@model ProviderProfileDto

@{
    ViewData["Title"] = "Provider Page";
    Layout = "~/Views/Shared/_Layout_Register.cshtml";
    ViewData["ActiveNav"] = "AllProviders";
}                                                       

<div class="govuk-width-container">
    @if (ViewBag.FromServicePage == true )
    {
        @if (ViewBag.PreviousServiceId != null)
        {       
            <a href = "@Url.Action("ServiceDetails", "Register", new { serviceId = ViewBag.PreviousServiceId })" class= "govuk-back-link" > Back </a>
        }
        else
        {
            <a href="@Url.Action("AllServices", "Register", null)" class="govuk-back-link"> Back </a>
        }       
    }
    else 
    {
        <a href="@Url.Action("AllProviders", "Register", null)" class="govuk-back-link">Back</a>
    }
    <main class="govuk-main-wrapper">
        <div class="govuk-grid-row">
            <div class="govuk-grid-column-full">
                <h1 class="govuk-heading-xl">
                    @Model.RegisteredName
                    <span class="govuk-caption-m">Last updated @DateTimeExtensions.FormatDateTime(@Model.LastUpdated, "d MMM yyyy, hh:mm tt") (GMT)</span>
                </h1>
                <p class="govuk-body-l">Trading name: @Html.DisplayFor(model => model.TradingName)</p>
                <div class="govuk-summary-card">
                    <div class="govuk-summary-card__title-wrapper">
                        <h2 class="govuk-summary-card__title">Provider Information</h2>
                    </div>
                    <div class="govuk-summary-card__content">
                        <dl class="govuk-summary-list">
                            <div class="govuk-summary-list__row">
                                <dt class="govuk-summary-list__key">Public Email Address</dt>
                                <dd class="govuk-summary-list__value">@Html.DisplayFor(model => model.PublicContactEmail)</dd>
                            </div>
                            <div class="govuk-summary-list__row">
                                <dt class="govuk-summary-list__key">Public Telephone Number</dt>
                                <dd class="govuk-summary-list__value">@Html.DisplayFor(model => model.ProviderTelephoneNumber)</dd>
                            </div>
                            <div class="govuk-summary-list__row">
                                <dt class="govuk-summary-list__key">Website Address</dt>
                                <dd class="govuk-summary-list__value">@Model.ProviderWebsiteAddress</dd>
                            </div>
                        </dl>
                    </div>
                </div>

                <div class="govuk-summary-card">
                    <div class="govuk-summary-card__title-wrapper">
                        <h2 class="govuk-summary-card__title">Services</h2>
                    </div>
                    <div class="govuk-summary-card__content">
                        <dl class="govuk-summary-list">
                            @foreach(var service in Model.Services)
                            {
                                <div class="govuk-summary-list__row">
                                    <dt class="govuk-summary-list__key">Service Name</dt>
                                    <dd class="govuk-summary-list__value">@service.ServiceName</dd>
                                    <dd class="govuk-summary-list__actions">
                                        <a class="govuk-link" href="@Url.Action("ServiceDetails", "Register", new { serviceId = service.Id, fromProviderPage = true })">View Details</a>
                                    </dd>
                                </div>
                            }                            
                        </dl>
                    </div>
                </div>         
                
                <hr class="govuk-section-break govuk-section-break--xl govuk-section-break--visible">

                <h3 class="govuk-heading-m">Explore the Topic</h3>
                <p class="govuk-body">
                    <strong><a href="https://www.gov.uk/government/publications/uk-digital-identity-and-attributes-trust-framework-beta-version/uk-digital-identity-and-attributes-trust-framework-beta-version#rules-for-all-identity-and-attribute-service-providers" class="govuk-link">Role Type</a></strong>
                </p>
                <p class="govuk-body">
                    <strong><a href="https://www.gov.uk/government/publications/identity-proofing-and-verification-of-an-individual/identity-profiles" class="govuk-link">Identity profiles</a></strong>
                </p>
                <p class="govuk-body">
                    <strong><a href="https://www.gov.uk/government/publications/digital-identity-document-validation-technology-idvt" class="govuk-link">Supplementary Schemes</a></strong>
                </p>
            </div>
        </div>
    </main>
</div>
